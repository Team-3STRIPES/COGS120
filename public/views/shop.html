<!DOCTYPE html>
<html lang="en-US">
  <head>
    <title>Focus</title>
    <link href="favicon.png" rel="icon">
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link href='modal.css' rel='stylesheet' type="text/css">
    <link href='nav.css' rel='stylesheet' type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Nunito+Sans" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Lora" rel="stylesheet">
    <link rel="stylesheet" href="shop.css" type="text/css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="points.js"></script>
    <script src="modal.js"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-129319407-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-129319407-1');
    </script>
    <style type="text/css"> .no-fouc {visibility: hidden;}
    </style>
    <script type="text/javascript">
        document.documentElement.className = 'no-fouc';
    </script>
  </head>
  <body>
    <nav class="navbar navbar-default">
      <div class="container-fluid">
        <div class="navbar-header">
            <a class="navbar-brand" href="home">
              <img src="logo.png" height="30" alt="focus">
            </a>
        </div>
        <ul class="nav navbar-nav navbar-right">
          <p class="navbar-text">Balance: <span id="points"></span> pts </p>
          <li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#"><span id="name"></span><span class="caret"></span></a>
            <ul class="dropdown-menu">
              <li><a href="profile">Profile</a></li>
              <li><a href="settings">Settings</a></li>
              <li><a href="index" onclick="signOut()">Sign Out</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </nav>
    <section id="shop">
      <h2>Shop</h2>
      <div id="items">
        <h3>Themes</h3>
        <div class="item" id="babyBlue">
          <div class="item-pic" id="baby-blue-pic"></div>
          <div class="item-text">
            <p class="item-name no-margin">Baby Blue</p>
            <p class="item-desc no-margin">Soften up the look of your focus with this gentle blue theme.</p>
          </div>
          <p class="item-buy">100 pts</p>
        </div>
        <div class="item" id="guavaPink">
          <div class="item-pic" id="guava-pink-pic"></div>
          <div class="item-text">
            <p class="item-name no-margin">Guava Pink</p>
            <p class="item-desc no-margin">Brighten up the mood of your focus with this vibrant pink theme.</p>
          </div>
          <p class="item-buy">100 pts</p>
        </div>
        <div class="item" id="mangoChile">
          <div class="item-pic" id="mango-chile-pic"></div>
          <div class="item-text">
            <p class="item-name no-margin">Mango Chile</p>
            <p class="item-desc no-margin">Spice up the tempo of your focus with this sharp orange theme.</p>
          </div>
          <p class="item-buy">100 pts</p>
        </div>
        <div class="item" id="forestGlade">
          <div class="item-pic" id="forest-glade-pic"></div>
          <div class="item-text">
            <p class="item-name no-margin">Forest Glade</p>
            <p class="item-desc no-margin">Freshen up the vibe of your focus with this relaxing green theme.</p>
          </div>
          <p class="item-buy">150 pts</p>
        </div>
        <div class="item" id="galacticVoid">
          <div class="item-pic" id="galactic-void-pic"></div>
          <div class="item-text">
            <p class="item-name no-margin">Galactic Void</p>
            <p class="item-desc no-margin">Sharpen up the edge of your focus with this sleek dark theme.</p>
          </div>
          <p class="item-buy">150 pts</p>
        </div>
        <h3 style="margin-top: 64px">Animations</h3>
        <div class="item" id="bus">
          <div class="item-pic" id="bus-pic"></div>
          <div class="item-text">
            <p class="item-name no-margin">Metro Bus</p>
            <p class="item-desc no-margin">Watch the wheels on the bus go round and round as you study.</p>
          </div>
          <p class="item-buy">100 pts</p>
        </div>
        <div class="item" id="caterpillar">
          <div class="item-pic" id="caterpillar-pic"></div>
          <div class="item-text">
            <p class="item-name no-margin">Cute Caterpillar</p>
            <p class="item-desc no-margin">Watch the caterpillar crawl across the screen as you study.</p>
          </div>
          <p class="item-buy">150 pts</p>
        </div>
        <div class="item" id="fish">
          <div class="item-pic" id="fish-pic"></div>
          <div class="item-text">
            <p class="item-name no-margin">Gold Fish</p>
            <p class="item-desc no-margin">Watch the gold fish swim across the screen as you study.</p>
          </div>
          <p class="item-buy">200 pts</p>
        </div>
      </div>

      <!-- confirm purchase -->
      <div id="purchase" class="modal">
        <div class="modal-content">
          <div class="modal-header">
            <span class="close">&times;</span>
            <h2 id="purchase-header"> </h2>
          </div>
          <p class="modal-body" id="purchase-body">
          </p>
          <div class="modal-footer">
            <button onclick="closeModal()"> Cancel </button>
            <button class="accented-button" onclick="confirmedBuy()"> Yes </button>
          </div>
        </div>
      </div>

      <!-- update theme -->
      <div id="switch" class="modal">
        <div class="modal-content">
          <div class="modal-header">
            <span class="close">&times;</span>
            <h2 id="switch-header"> </h2>
          </div>
          <p class="modal-body" id="switch-body">
          </p>
          <div class="modal-footer">
            <button onclick="closeModal()"> No </button>
            <button class="accented-button" onclick="updateTheme()"> Yes </button>
          </div>
        </div>
      </div>

      <!-- already bought -->
      <div id="fail" class="modal">
        <div class="modal-content">
          <div class="modal-header">
            <span class="close">&times;</span>
            <h2 id="fail-header"> </h2>
          </div>
          <p class="modal-body" id="fail-body">
          </p>
          <div class="modal-footer">
            <button class="accented-button" onclick="closeModal()"> OK </button>
          </div>
        </div>
      </div>

    </section>
  </body>
</html>
<script>

var justBought;

$(document).ready(function() {
  if(localStorage.getItem('loggedIn') === 'false') forceLogin();

  $('.no-fouc').removeClass('no-fouc');

  updateShopButtons();
});

var items = {
  babyBlue: '100',
  guavaPink: '100',
  mangoChile: '100',
  forestGlade: '150',
  galacticVoid: '150',
  bus: '100',
  caterpillar: '150',
  fish: '200'
}

$('.item-buy').click(function(e) {
  justBought = $(this).parent().attr('id');
  var isTheme = justBought.toLowerCase() !== justBought;
  if($(this).text() !== 'Use') {
    canBuyItem(justBought, items[justBought]);
  } else {
    if(isTheme) {
      updateTheme(justBought);
    } else {
      updateAnimation(justBought);
    }
  }
});

function confirmedBuy() {
  closeModal();
  buyItem(justBought, items[justBought]);
  $('#points').text($('#points').text - items[justBought]);
  var isTheme = justBought.toLowerCase() !== justBought;
  if(isTheme) {
    render_modal("switch", "switch-header", "switch-body", "Completed!", "Do you want to switch to your new theme?")
  } else {
    window.reload(true);
  }
}

function updateTheme() {
  changeTheme(justBought);
}
</script>
